{% extends "base.html.twig" %}

{% block title %}Commandes - Brasil Burger{% endblock %}

{% block content %}
    <div class="card">
        <h2>ğŸ“¦ Gestion des Commandes</h2>
        <p style="color: var(--medium-gray); margin-bottom: 20px;">Consultez et gÃ©rez l'ensemble de vos commandes</p>
        <a href="{{ path('app_commande_new') }}" class="btn btn-success">â• Nouvelle Commande</a>
    </div>

    {% if commandes is empty %}
        <div class="card text-center">
            <p style="font-size: 16px; color: var(--medium-gray); padding: 40px 0;">
                ğŸ“­ Aucune commande trouvÃ©e.<br>
                <a href="{{ path('app_commande_new') }}" style="color: var(--primary-color); text-decoration: underline;">CrÃ©er une nouvelle commande</a>
            </p>
        </div>
    {% else %}
        <div class="card" style="overflow-x: auto;">
            <table>
                <thead>
                    <tr>
                        <th style="width: 10%;">ID</th>
                        <th style="width: 20%;">Client</th>
                        <th style="width: 18%;">Date</th>
                        <th style="width: 15%;">Ã‰tat</th>
                        <th style="width: 15%;">Montant</th>
                        <th style="width: 12%;">Mode</th>
                        <th style="width: 10%;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for commande in commandes %}
                        <tr>
                            <td><strong>#{{ commande.id }}</strong></td>
                            <td>{{ commande.client.prenom }} {{ commande.client.nom }}</td>
                            <td>{{ commande.date|date("d/m/Y H:i") }}</td>
                            <td>
                                {% if commande.etat == "Terminer" %}
                                    <span style="background: #27ae60; color: white; padding: 5px 10px; border-radius: 6px; font-size: 12px; font-weight: 600;">âœ“ {{ commande.etat }}</span>
                                {% elseif commande.etat == "ValidÃ©e" %}
                                    <span style="background: #3498db; color: white; padding: 5px 10px; border-radius: 6px; font-size: 12px; font-weight: 600;">âš¡ {{ commande.etat }}</span>
                                {% elseif commande.etat == "En cours" %}
                                    <span style="background: #f39c12; color: white; padding: 5px 10px; border-radius: 6px; font-size: 12px; font-weight: 600;">â³ {{ commande.etat }}</span>
                                {% elseif commande.etat == "AnnulÃ©e" %}
                                    <span style="background: #e74c3c; color: white; padding: 5px 10px; border-radius: 6px; font-size: 12px; font-weight: 600;">âœ— {{ commande.etat }}</span>
                                {% else %}
                                    <span style="background: #95a5a6; color: white; padding: 5px 10px; border-radius: 6px; font-size: 12px; font-weight: 600;">{{ commande.etat }}</span>
                                {% endif %}
                            </td>
                            <td><strong style="color: var(--primary-color);">{{ (commande.montant ?? 0)|number_format(0, ',', ' ') }} FCFA</strong></td>
                            <td>
                                {% if commande.mode == "Ã€ emporter" %}
                                    ğŸ“¦ Ã€ emporter
                                {% elseif commande.mode == "Livraison Ã  domicile" %}
                                    ğŸšš Livraison
                                {% elseif commande.mode == "Sur place" %}
                                    ğŸª‘ Sur place
                                {% else %}
                                    {{ commande.mode }}
                                {% endif %}
                            </td>
                            <td>
                                <a href="{{ path('app_commande_show', {'id': commande.id}) }}" class="btn btn-secondary" style="padding: 8px 12px; font-size: 12px; margin-right: 5px;">ğŸ‘ï¸ Voir</a>
                                <a href="{{ path('app_commande_edit', {'id': commande.id}) }}" class="btn" style="padding: 8px 12px; font-size: 12px;">âœï¸ Ã‰diter</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}
{% endblock %}
